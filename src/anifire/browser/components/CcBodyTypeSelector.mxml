<?xml version="1.0" encoding="utf-8"?>
<s:Group xmlns:fx="http://ns.adobe.com/mxml/2009" 
		 xmlns:s="library://ns.adobe.com/flex/spark" 
		 xmlns:mx="library://ns.adobe.com/flex/mx">
	<fx:Script>
		<![CDATA[
			import anifire.constant.ServerConstants;
			import anifire.constant.ThemeConstants;
			import anifire.managers.ExternalLinkManager;
			
			private var _showManType:Boolean;
			private var _showWomanType:Boolean;
			private var _showBoyType:Boolean;
			private var _showGirlType:Boolean;
			private var _showHeavyType:Boolean;
			private var _showMuscleType:Boolean;
			private var _showHeavyManType:Boolean;
			private var _showHeavyWomanType:Boolean;
			private var _supportBodyType:Boolean;
			private var _themeId:String;

			protected function onCloseClick(param1:MouseEvent) : void
			{
				this.currentState = "normal";
			}
			
			protected function getCreateCharacterUrl() : String
			{
				var _loc1_:* = null;
				if(ServerConstants.IS_WIX)
				{
					_loc1_ = ServerConstants.HOST_PATH + "charactercreator/create/" + this._themeId;
				}
				else
				{
					_loc1_ = ServerConstants.CC_PAGE_PATH + "/" + this._themeId + "/new_char";
				}
				return _loc1_;
			}
			
			protected function onAddClick(param1:MouseEvent) : void
			{
				var _loc2_:String = null;
				if(this._supportBodyType)
				{
					this.currentState = "expanded";
				}
				else if(this._themeId)
				{
					_loc2_ = this.getCreateCharacterUrl();
					ExternalLinkManager.instance.navigateWithSession(_loc2_);
				}
			}
			
			public function set themeId(param1:String) : void
			{
				if(this._themeId != param1)
				{
					this._themeId = param1;
					switch(param1)
					{
						case ThemeConstants.BUSINESS_THEME_ID:
							this._supportBodyType = true;
							this._showManType = true;
							this._showWomanType = true;
							this._showBoyType = true;
							this._showGirlType = true;
							this._showHeavyManType = true;
							this._showHeavyWomanType = true;
							break;
						case ThemeConstants.WHITEBOARD_THEME_ID:
							this._supportBodyType = true;
							this._showManType = true;
							this._showWomanType = true;
							this._showBoyType = true;
							this._showGirlType = true;
							break;
						case ThemeConstants.FAMILY_THEME_ID:
							this._supportBodyType = true;
							this._showManType = true;
							this._showWomanType = true;
							this._showHeavyType = true;
							this._showMuscleType = true;
							break;
						case ThemeConstants.ANIME_THEME_ID:
						case ThemeConstants.NINJAANIME_THEME_ID:
							this._supportBodyType = true;
							this._showManType = true;
							this._showWomanType = true;
					}
				}
			}
			
			protected function onBodyTypeButtonClick(param1:MouseEvent) : void
			{
				var _loc4_:String = null;
				var _loc2_:String = this.getCreateCharacterUrl();
				var _loc3_:URLVariables = new URLVariables();
				switch(param1.target)
				{
					case this.manType:
						if(this._themeId == ThemeConstants.FAMILY_THEME_ID)
						{
							_loc4_ = "adam";
						}
						else if(this._themeId == ThemeConstants.BUSINESS_THEME_ID || this._themeId == ThemeConstants.WHITEBOARD_THEME_ID)
						{
							_loc4_ = "man";
						}
						else
						{
							_loc4_ = "guy";
						}
						break;
					case this.womanType:
						if(this._themeId == ThemeConstants.FAMILY_THEME_ID)
						{
							_loc4_ = "eve";
						}
						else if(this._themeId == ThemeConstants.BUSINESS_THEME_ID || this._themeId == ThemeConstants.WHITEBOARD_THEME_ID)
						{
							_loc4_ = "woman";
						}
						else
						{
							_loc4_ = "girl";
						}
						break;
					case this.heavyType:
						_loc4_ = "bob";
						break;
					case this.muscleType:
						_loc4_ = "rocky";
						break;
					case this.boyType:
						_loc4_ = "boy";
						break;
					case this.girlType:
						_loc4_ = "girl";
						break;
					case this.heavyManType:
						_loc4_ = "heavy_man";
						break;
					case this.heavyWomanType:
						_loc4_ = "heavy_woman";
				}
				_loc3_["type"] = _loc4_;
				ExternalLinkManager.instance.navigateWithVariables(_loc2_,_loc3_,false);
			}
		]]>
	</fx:Script>
	
	<s:states>
		<s:State name="normal"/>
		<s:State name="expanded"/>
	</s:states>

	<s:Button buttonMode="true" width="100%" height="58" skinClass="anifire.browser.skins.CreateCcButtonSkin" height.expanded="108" id="normalOption" click="onAddClick(event)" visible.expanded="false"/>
	<s:Group width="100%" height="58" height.expanded="108" clipAndEnableScrolling="true" visible="false" visible.expanded="true" id="expandedOption">
		<s:Group width="100%" height="100%">
			<s:Rect width="100%" height="100%">
				<s:stroke>
					<s:SolidColorStroke color="0x96A2B4"/>
				</s:stroke>
			</s:Rect>
			<s:BitmapImage source="@Embed('../images/bodyTypeBg.png')" smooth="true" top="4" bottom="4" left="4" right="4"/>
		</s:Group>
		<s:Group horizontalCenter="0" verticalCenter="0">
			<s:layout>
				<s:HorizontalLayout gap="35"/>
			</s:layout>
			<s:Button buttonMode="true" skinClass="anifire.browser.skins.AddManBodyTypeButtonSkin" click="onBodyTypeButtonClick(event)" id="manType"/>
			<s:Button buttonMode="true" skinClass="anifire.browser.skins.AddWomanBodyTypeButtonSkin" click="onBodyTypeButtonClick(event)" id="womanType"/>
			<s:Button buttonMode="true" skinClass="anifire.browser.skins.AddHeavyBodyTypeButtonSkin" click="onBodyTypeButtonClick(event)" id="heavyType"/>
			<s:Button buttonMode="true" skinClass="anifire.browser.skins.AddMuscleBodyTypeButtonSkin" click="onBodyTypeButtonClick(event)" id="muscleType"/>
			<s:Button buttonMode="true" skinClass="anifire.browser.skins.AddBoyBodyTypeButtonSkin" click="onBodyTypeButtonClick(event)" id="boyType"/>
			<s:Button buttonMode="true" skinClass="anifire.browser.skins.AddGirlBodyTypeButtonSkin" click="onBodyTypeButtonClick(event)" id="girlType"/>
			<s:Button buttonMode="true" skinClass="anifire.browser.skins.AddHeavyManBodyTypeButtonSkin" click="onBodyTypeButtonClick(event)" id="heavyManType"/>
			<s:Button buttonMode="true" skinClass="anifire.browser.skins.AddHeavyWomanBodyTypeButtonSkin" click="onBodyTypeButtonClick(event)" id="heavyWomanType"/>
		</s:Group>
		<s:Button buttonMode="true" top="10" right="10" click="onCloseClick(event)"/>
	</s:Group>
</s:Group>
